### ⌨️ 视频编辑快捷键完整映射表

此表分为五个逻辑区域。`Cmd` 代表 Mac 的 Command 键，`Ctrl` 代表 Windows 的 Control 键。

#### 1\. 播放与导航 (Playback & Navigation)

| 功能 | Windows 快捷键 | Mac 快捷键 | 冲突风险 | 🛡️ 屏蔽/解决策略 (代码逻辑) |
| :--- | :--- | :--- | :--- | :--- |
| **播放 / 暂停** | `Space` | `Space` | **高** (向下滚动网页) | `e.preventDefault()` 强制拦截。<br>**注意**：需检测焦点，若焦点在字幕输入框内，则不拦截（允许输入空格）。 |
| **上一帧 (步进)** | `Left` (←) | `Left` (←) | 中 (水平滚动) | `e.preventDefault()`。 |
| **下一帧 (步进)** | `Right` (→) | `Right` (→) | 中 (水平滚动) | `e.preventDefault()`。 |
| **快退 (5秒)** | `Shift` + `Left` | `Shift` + `Left` | 低 | 无冲突，监听 `shiftKey` 即可。 |
| **快进 (5秒)** | `Shift` + `Right` | `Shift` + `Right` | 低 | 无冲突，监听 `shiftKey` 即可。 |
| **跳转到开头** | `Home` | `Home` | 中 (滚到页首) | `e.preventDefault()`，将播放头设为 0。 |
| **跳转到结尾** | `End` | `End` | 中 (滚到页尾) | `e.preventDefault()`，将播放头设为总时长。 |

#### 2\. 视图缩放 (View Zoom)

| 功能 | Windows 快捷键 | Mac 快捷键 | 冲突风险 | 🛡️ 屏蔽/解决策略 (代码逻辑) |
| :--- | :--- | :--- | :--- | :--- |
| **波形放大** | `=` (等号) | `=` | **极高** (若用 Ctrl+ + 会触发浏览器缩放) | **切记不要用 Ctrl 组合**。直接监听 `=` 键。Pr 默认也是这个。 |
| **波形缩小** | `-` (减号) | `-` | **极高** (若用 Ctrl+ - 会触发浏览器缩放) | 直接监听 `-` 键。 |
| **波形适应屏幕** | `\` (反斜杠) | `\` | 低 | 直接监听。Pr 经典键位。 |
| **视频画面放大** | `.` (句号) | `.` | 低 | 监听 `.` 键。 |
| **视频画面缩小** | `,` (逗号) | `,` | 低 | 监听 `,` 键。 |
| **画面适应窗口** | `Shift` + `Z` | `Shift` + `Z` | 低 | 避免使用 `Ctrl+0` (浏览器重置缩放)，改用此组合。 |

#### 3\. 字幕与字体 (Subtitle Editing)

| 功能 | Windows 快捷键 | Mac 快捷键 | 冲突风险 | 🛡️ 屏蔽/解决策略 (代码逻辑) |
| :--- | :--- | :--- | :--- | :--- |
| **字体变大** | `Alt` + `]` | `Option` + `]` | 低 | 监听 `altKey` + `BracketRight`。避开 `Ctrl` 防止冲突。 |
| **字体变小** | `Alt` + `[` | `Option` + `[` | 低 | 监听 `altKey` + `BracketLeft`。 |
| **分割字幕** | `Ctrl` + `K` | `Cmd` + `K` | 中 (浏览器聚焦搜索栏) | `e.preventDefault()`。这是非编软件通用的“切刀”快捷键。 |
| **合并字幕** | `Ctrl` + `J` | `Cmd` + `J` | 中 (浏览器下载列表) | `e.preventDefault()`。 |

#### 4\. 全局操作 (Global Operations)

| 功能 | Windows 快捷键 | Mac 快捷键 | 冲突风险 | 🛡️ 屏蔽/解决策略 (代码逻辑) |
| :--- | :--- | :--- | :--- | :--- |
| **保存 / 更新** | `Ctrl` + `S` | `Cmd` + `S` | **极高** (保存网页 HTML) | **必须拦截**。即使焦点在输入框中也要拦截并触发保存逻辑。 |
| **撤销** | `Ctrl` + `Z` | `Cmd` + `Z` | 中 (浏览器输入撤销) | 建立全局操作栈 (Store)。拦截后调用 Store 的 undo 方法。 |
| **重做** | `Ctrl` + `Shift` + `Z` 或`Ctrl` + `Y` | `Cmd` + `Shift` + `Z` | 中 | 同上。 |
| **导出** | `Ctrl` + `E` | `Cmd` + `E` | 中 (浏览器地址栏) | `e.preventDefault()` 并打开导出弹窗。 |
| **打开任务监控**| `Ctrl` + `M` | `Cmd` + `M` | 中 (最小化窗口) | 若无法屏蔽最小化，建议改为 `Alt` + `M`。 |

-----

### 💻 核心代码实现：`useShortcuts.js`

这是你可以直接在 Vue 组件中使用的 Hook，完美处理了冲突屏蔽逻辑。

```javascript
import { onMounted, onUnmounted } from 'vue';

/**
 * 快捷键管理 Hook
 * @param {Object} actions - 包含所有操作的回调函数对象
 */
export function useShortcuts(actions) {
  const handleKeydown = (e) => {
    // 1. 基础键位检测
    const key = e.key.toLowerCase();
    const code = e.code;
    const isCtrl = e.ctrlKey || e.metaKey; // 兼容 Mac Command
    const isShift = e.shiftKey;
    const isAlt = e.altKey;

    // 2. 焦点检测：如果在输入框内，部分快捷键失效
    const target = e.target;
    // contentEditable 兼容富文本编辑器
    const isInputActive = target.tagName === 'INPUT' || 
                          target.tagName === 'TEXTAREA' || 
                          target.isContentEditable;

    // ==========================================
    // 第一类：绝对拦截 (即使在输入框中也要生效)
    // ==========================================
    
    // 保存 (Ctrl + S)
    if (isCtrl && key === 's') {
      e.preventDefault(); // 🛑 阻止浏览器"另存为"
      actions.save?.();
      return;
    }

    // 撤销 (Ctrl + Z)
    if (isCtrl && key === 'z' && !isShift) {
      e.preventDefault();
      actions.undo?.();
      return;
    }

    // 重做 (Ctrl + Shift + Z)
    if (isCtrl && isShift && key === 'z') {
      e.preventDefault();
      actions.redo?.();
      return;
    }

    // ==========================================
    // 第二类：输入框保护 (输入文字时不触发)
    // ==========================================
    if (isInputActive) return;

    // 播放/暂停 (Space)
    if (code === 'Space') {
      e.preventDefault(); // 🛑 阻止网页向下滚动
      actions.togglePlay?.();
    }

    // 左右逐帧/快进
    if (code === 'ArrowLeft') {
      e.preventDefault(); // 🛑 阻止横向滚动
      if (isShift) actions.seekBackward?.(); // 快退
      else actions.stepBackward?.();         // 上一帧
    }
    if (code === 'ArrowRight') {
      e.preventDefault();
      if (isShift) actions.seekForward?.();  // 快进
      else actions.stepForward?.();          // 下一帧
    }
    
    // Home / End
    if (code === 'Home') { e.preventDefault(); actions.seekToStart?.(); }
    if (code === 'End') { e.preventDefault(); actions.seekToEnd?.(); }

    // ==========================================
    // 第三类：视图控制 (波形/画面)
    // ==========================================
    
    // 波形缩放 (= / -)
    if (key === '=') actions.zoomInWave?.();
    if (key === '-') actions.zoomOutWave?.();
    if (key === '\\') actions.fitWave?.(); // 反斜杠

    // 画面缩放 (. / ,)
    if (key === '.') actions.zoomInVideo?.();
    if (key === ',') actions.zoomOutVideo?.();
    if (isShift && key === 'z') actions.fitVideo?.();

    // ==========================================
    // 第四类：字幕样式 (Alt组合)
    // ==========================================
    if (isAlt && key === ']') actions.fontSizeUp?.();
    if (isAlt && key === '[') actions.fontSizeDown?.();

    // ==========================================
    // 第五类：编辑操作
    // ==========================================
    // 导出 (Ctrl + E)
    if (isCtrl && key === 'e') {
      e.preventDefault(); // 🛑 阻止浏览器地址栏聚焦
      actions.export?.();
    }
    
    // 切割 (Ctrl + K)
    if (isCtrl && key === 'k') {
      e.preventDefault(); // 🛑 阻止浏览器搜索
      actions.splitSubtitle?.();
    }
  };

  onMounted(() => window.addEventListener('keydown', handleKeydown));
  onUnmounted(() => window.removeEventListener('keydown', handleKeydown));
}
```

### 💡 在 Vue 组件中使用

```javascript
// EditorView.vue
import { useShortcuts } from '@/hooks/useShortcuts';

const actions = {
  save: () => console.log('执行保存...'),
  togglePlay: () => videoRef.value.toggle(),
  undo: () => store.undo(),
  zoomInWave: () => waveformRef.value.zoomIn(),
  // ... 其他对应方法
};

useShortcuts(actions);
```

### 🛑 无法屏蔽的“死穴” (请勿设计以下快捷键)

无论如何写 `preventDefault`，以下快捷键都**无法**被网页脚本接管，设计时必须避开：

1.  **`Ctrl + W`** (关闭标签页)
2.  **`Ctrl + N`** (新建窗口)
3.  **`Ctrl + T`** (新建标签页)
4.  **`Alt + Tab`** (切换程序)
5.  **`Ctrl + Alt + Del`** (系统中断)